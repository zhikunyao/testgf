# 🚢 潜艇猎手 (Submarine Hunter)

一款基于Python和Pygame开发的2D海战游戏，玩家扮演驱逐舰舰长，在深海中猎杀各种类型的潜艇。

## 🎮 游戏特色

### 核心玩法
- **经典深海猎杀**：控制驱逐舰在海面移动，投掷深海炸弹消灭潜艇
- **连环爆炸系统**：炸弹爆炸可引爆范围内的潜艇，产生连锁反应获得更高分数
- **多种武器系统**：普通深海炸弹和威力强大的高爆炸弹
- **三种潜艇类型**：各具特色的侦查潜艇、布雷潜艇和导弹潜艇

### 视觉效果
- **分层海洋环境**：120像素天空区域，680像素海洋深度
- **实时UI显示**：生命值、得分、弹药状态在天空区域显示
- **独立调试面板**：220像素宽的右侧调试面板，实时显示游戏状态
- **丰富视觉特效**：爆炸动画、水波纹理、潜艇细节绘制

### 游戏机制
- **驱逐舰生命系统**：3条生命值，受伤后有3秒无敌时间
- **弹药管理系统**：高爆炸弹最多存储3枚，每10秒自动补充1枚
- **智能碰撞检测**：精确的炸弹、潜艇、水雷碰撞判定
- **动态难度调整**：可实时调整潜艇生成概率

## 🚀 安装与运行

### 系统要求
- Python 3.7+
- Pygame 2.0+

### 安装步骤

1. **克隆或下载项目**
```bash
git clone <repository-url>
cd submarine-hunter
```

2. **创建虚拟环境（推荐）**
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# macOS/Linux
source venv/bin/activate
```

3. **安装依赖**
```bash
pip install -r requirements.txt
```

4. **运行游戏**
```bash
python submarine_hunter.py
```

## 🎯 操作说明

### 基本控制
- **← →** 方向键：控制驱逐舰左右移动
- **A** 键：投掷普通深海炸弹
- **S** 键：发射高爆炸弹（威力2倍，爆炸半径200像素）
- **ESC** 键：退出游戏

### 调试功能
- **D** 键：开关调试面板
- **G** 键：开关无敌模式
- **1/2** 键：增加/减少侦查潜艇生成概率
- **3/4** 键：增加/减少布雷潜艇生成概率
- **5/6** 键：增加/减少导弹潜艇生成概率

## 🐟 潜艇类型详解

### 侦查潜艇 (Scout Submarine)
- **外观**：绿色，60×20像素
- **行为**：在所有水层游动，速度1-2像素/帧
- **深度范围**：180-730像素（避免过于靠近水面）
- **得分**：100分
- **特殊能力**：无

### 布雷潜艇 (Minelayer Submarine)
- **外观**：棕色，80×25像素
- **行为**：只在中深水层活动，每4秒发射一枚水雷
- **深度范围**：240-730像素
- **得分**：200分
- **特殊能力**：水雷上浮到水面威胁驱逐舰

### 导弹潜艇 (Missile Submarine)
- **外观**：深灰色，90×30像素
- **行为**：只在深水区活动，每5秒发射一枚导弹
- **深度范围**：540-730像素
- **得分**：300分
- **特殊能力**：发射三阶段飞行导弹（水平→转向→垂直上升）

## 💥 武器系统

### 普通深海炸弹
- **爆炸半径**：100像素
- **外观**：灰色桶状，带金属环和引信
- **用途**：基础武器，无限弹药

### 高爆炸弹
- **爆炸半径**：200像素（2倍威力）
- **外观**：红色桶状，黄色标识
- **限制**：最多存储3枚，每10秒补充1枚
- **碰撞体积**：20×30像素（比普通炸弹大）

## 🌊 游戏机制详解

### 连环爆炸系统
- 炸弹爆炸可引爆100像素范围内的潜艇
- 潜艇爆炸可引爆80像素范围内的其他潜艇
- 高爆炸弹可引爆200像素范围内的所有目标
- 连环爆炸可获得额外分数奖励

### 威胁系统
- **水雷**：由布雷潜艇发射，上浮到水面后威胁驱逐舰
- **导弹**：由导弹潜艇发射，三阶段飞行路径，最终冲出水面
- **碰撞检测**：水雷和导弹都可被炸弹提前拦截

### 生命系统
- 驱逐舰初始3条生命
- 被水雷或导弹击中扣除1条生命
- 受伤后3秒无敌时间（闪烁效果）
- 生命归零游戏结束

## 🎨 界面布局

### 主游戏区域（1200×800像素）
- **天空区域**：120像素高度，显示UI信息
- **海洋区域**：680像素高度，游戏主要活动区域
- **调试面板**：右侧220像素宽，显示调试信息和控制选项

### UI信息分布
- **左上角**：生命值、得分
- **中上方**：弹药信息、击沉统计
- **右上角**：威胁提示（水雷、导弹数量）
- **底部**：操作说明

## 🔧 性能优化

### 已实现的优化
- **批量对象管理**：使用索引批量删除游戏对象，避免列表操作性能问题
- **减少调试输出**：通过`verbose_logging`开关控制输出频率
- **智能渲染**：只绘制活跃的游戏对象
- **内存管理**：及时清理无效的爆炸、炸弹、潜艇对象

### 性能监控
- 每5秒输出一次性能统计（在verbose模式下）
- 实时显示活跃对象数量
- 帧率稳定在60FPS

## 📊 得分系统

| 目标 | 得分 | 特殊奖励 |
|------|------|----------|
| 侦查潜艇 | 100分 | 无 |
| 布雷潜艇 | 200分 | 清除威胁 |
| 导弹潜艇 | 300分 | 最高价值 |
| 连环爆炸 | 额外分数 | 多重击杀 |

## 📈 更新历史

### v1.0 - 基础版本
- 实现基本的潜艇猎杀玩法
- 单一类型潜艇和普通炸弹

### v2.0 - 多样化升级
- 添加三种不同类型的潜艇
- 实现高爆炸弹系统
- 连环爆炸机制

### v3.0 - 威胁系统
- 布雷潜艇和水雷威胁
- 导弹潜艇和导弹攻击
- 驱逐舰生命系统

### v4.0 - 界面优化
- 全新的界面布局设计
- 独立调试面板
- 性能优化和稳定性提升
- 潜艇深度安全距离调整

## 🐛 已知问题

- 极少数情况下可能出现轻微的帧率波动
- 大量连环爆炸时可能短暂影响性能

## 🤝 贡献指南

欢迎提交问题报告和功能建议！

## 📄 许可证

本项目采用MIT许可证。

---

**祝你在深海猎杀中取得佳绩！** 🚢💥🐟 